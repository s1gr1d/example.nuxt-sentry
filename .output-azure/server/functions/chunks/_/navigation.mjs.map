{"version":3,"file":"navigation.mjs","sources":["../../../../../node_modules/@nuxt/content/dist/runtime/server/navigation.js"],"sourcesContent":["import { generateTitle } from \"../transformers/path-meta.js\";\nimport { useRuntimeConfig } from \"#imports\";\nexport function createNav(contents, configs) {\n  const { navigation } = useRuntimeConfig().public.content;\n  if (navigation === false) {\n    return [];\n  }\n  const pickNavigationFields = (content) => ({\n    ...pick([\"title\", ...navigation.fields])(content),\n    ...isObject(content?.navigation) ? content.navigation : {}\n  });\n  const nav = contents.sort((a, b) => a._path.localeCompare(b._path)).reduce((nav2, content) => {\n    const parts = content._path.substring(1).split(\"/\");\n    const idParts = content._id.split(\":\").slice(1);\n    const isIndex = !!idParts[idParts.length - 1]?.match(/([1-9][0-9]*\\.)?index.md/g);\n    const getNavItem = (content2) => ({\n      title: content2.title,\n      _path: content2._path,\n      _file: content2._file,\n      children: [],\n      ...pickNavigationFields(content2),\n      ...content2._draft ? { _draft: true } : {}\n    });\n    const navItem = getNavItem(content);\n    if (isIndex) {\n      const dirConfig = configs[navItem._path];\n      if (typeof dirConfig?.navigation !== \"undefined\" && !dirConfig?.navigation) {\n        return nav2;\n      }\n      if (content._path !== \"/\") {\n        const indexItem = getNavItem(content);\n        navItem.children.push(indexItem);\n      }\n      if (dirConfig) {\n        Object.assign(\n          navItem,\n          pickNavigationFields(dirConfig)\n        );\n      }\n    }\n    if (parts.length === 1) {\n      nav2.push(navItem);\n      return nav2;\n    }\n    const siblings = parts.slice(0, -1).reduce((nodes, part, i) => {\n      const currentPathPart = \"/\" + parts.slice(0, i + 1).join(\"/\");\n      const conf = configs[currentPathPart];\n      if (typeof conf?.navigation !== \"undefined\" && !conf.navigation) {\n        return [];\n      }\n      let parent = nodes.find((n) => n._path === currentPathPart);\n      if (!parent) {\n        parent = {\n          title: generateTitle(part),\n          _path: currentPathPart,\n          _file: content._file,\n          children: [],\n          ...conf && pickNavigationFields(conf)\n        };\n        nodes.push(parent);\n      }\n      return parent.children;\n    }, nav2);\n    siblings.push(navItem);\n    return nav2;\n  }, []);\n  return sortAndClear(nav);\n}\nconst collator = new Intl.Collator(void 0, { numeric: true, sensitivity: \"base\" });\nfunction sortAndClear(nav) {\n  nav.forEach((item) => {\n    item._file = item._file.split(\".\").slice(0, -1).join(\".\");\n  });\n  const sorted = nav.sort((a, b) => collator.compare(a._file, b._file));\n  for (const item of sorted) {\n    if (item.children?.length) {\n      sortAndClear(item.children);\n    } else {\n      delete item.children;\n    }\n    delete item._file;\n  }\n  return nav;\n}\nfunction pick(keys) {\n  return (obj) => {\n    obj = obj || {};\n    if (keys && keys.length) {\n      return keys.filter((key) => typeof obj[key] !== \"undefined\").reduce((newObj, key) => Object.assign(newObj, { [key]: obj[key] }), {});\n    }\n    return obj;\n  };\n}\nfunction isObject(obj) {\n  return Object.prototype.toString.call(obj) === \"[object Object]\";\n}\n"],"names":[],"mappings":"","x_google_ignoreList":[0]}